htmx.defineExtension("safe-nonce",{transformResponse:function(e,n,s){htmx.config.refreshOnHistoryMiss=true;let t=new RegExp(`<script(\\s[^>]*>|>).*?<\\/script(\\s[^>]*>|>)`,"gis");let o=n.getResponseHeader("HX-Nonce");if(!o){const i=n.getResponseHeader("content-security-policy");if(i){const c=i.match(/(default|script)-src[^;]*'nonce-([^']*)'/i);if(c){o=c[2]}}}if(window.location.hostname){const r=new URL(n.responseURL);if(r.hostname!==window.location.hostname){o=""}}if(o){t=new RegExp(`<script(\\s(?!nonce="${o.replace(/[\\\[\]\/^*.+?$(){}'#:!=|]/g,"\\$&")}")[^>]*>|>).*?<\\/script(\\s[^>]*>|>)`,"gis")}return e.replace(t,"")}});